(()=>{var l="/website/",m=20;(function(){let s=new FlexSearch.Document({document:{id:"id",index:["title","tags","content","date"],store:["title","summary","date","permalink"]},tokenize:"forward"});function h(e){let t=document.querySelector("template").content,n=document.createDocumentFragment(),c=document.querySelector("[data-search-results]");c.textContent="";for(let o in e){let r=e[o],a=t.cloneNode(!0),d=a.querySelector("a"),y=a.querySelector("time"),q=a.querySelector(".content");d.innerHTML=r.title,d.href=r.permalink,y.innerText=r.date,q.innerHTML=r.summary,n.appendChild(a)}c.appendChild(n)}function i(){let e=document.querySelector("[data-search-text]").value.trim(),t=s.search({query:e,enrich:!0,limit:m}),n={};t.forEach(function(c){c.result.forEach(function(o){n[o.id]=o.doc})}),h(n)}function f(){let e=document.querySelector("[data-search-form]");e.addEventListener("submit",function(t){t.preventDefault(),i()}),e.addEventListener("input",function(){i()}),document.querySelector("[data-search-loading]").classList.add("hidden"),document.querySelector("[data-search-input]").classList.remove("hidden"),document.querySelector("[data-search-loading]").focus()}function p(){let e=l+"searchindex.json";document.querySelector("[data-search-loading]").classList.remove("hidden"),fetch(e).then(function(t){return t.json()}).then(function(t){t.forEach(function(n){s.add(n)})})}p(),f()})();})();
